{% extends "base.jinja2" %}

{% block content %}
  <span class="header">
    Enter in your item's details below
  </span>
  <p class="explanation_p">
    Please fill in the Category, Brand, and Retail price for your item below.
    If your brand isn't on the list then choose 'other'. You don't need to fill
    in the description but it helps.
  </p>
<div class="input-form-group">
  <form method="POST" action="{{ url_for('main.index') }}" class="form-inline">
    <div class="row input_row">
      <div class="col-md-2 control-label">
          <span id="item_type_label">{{ form.item_type.label }}</span>
      </div>
      <div class="col-md-10">
          {{ form.item_type(class_='form-control select_custom') }}
      </div>
    </div><!-- /.row -->
    <div class="row input_row">
      <div class="col-md-2 control-label">
        <span id="brand_label">{{ form.brand.label }}</span>
      </div>
      <div class="col-md-10">
        {{ form.brand(class_='form-control select_custom') }}
          {% if request.method == 'POST' %}
            <span class="form_helper_text">
            <small>
              <div class="form_error">
                {% for error in form.brand.errors %}
                  {{ error }}
                {% endfor %}
              </div>
            </small>
            </span>
          {% endif %}
      </div>
    </div><!-- /.row -->
    <div class="row input_row">
      <div class="col-md-2 control-label">
        <span id="price_label">{{ form.est_price.label }}</span>
      </div>
      <div class="col-md-10">
        {{ form.est_price(class_='form-control select_custom') }}
        <span class="form_helper_text">
          <br>
          <small>
          (ex: This is the price you would pay if you bought this item or a similar item new.)
          {% if request.method == 'POST' %}
            <div class="form_error">
              {% for error in form.est_price.errors %}
                {{ error }}
              {% endfor %}
            </div>
          {% endif %}
          </small>
        </span>
      </div><!-- /.col-md-10 -->
    </div><!-- /.row -->
    <div class="row">
      <div class="col-md-2 control-label">
        <span id="description_label">{{ form.description.label }}</span>
      </div>
      <div id="description_field_row" class="col-md-10">
        {{ form.description(class_='form-control') }}
        <span class="form_helper_text">
	  <br>
	    <small>
	      (ex: Formfitting midi dress with contrasting floral embroidery and lattice trim)
	      {% if request.method == 'POST' %}
		<div class="form_error">
		  {% for error in form.description.errors %}
		    {{ error }}
		  {% endfor %}
		</div>
	      {% endif %}
	    </small>
	  </span>
      </div><!-- /.col-md-10 -->
    </div><!-- /.row -->

    <div class="row">
      <div class="col-md-10 col-md-offset-2">
        {{ form.submit(class_="btn btn") }}
      </div>
    </div><!-- /.row -->
  </form>
</div><!-- /.from-group -->

{% if request.method == 'POST' and form.validate() %}
<div class="panel panel-success output_panel">
  <div class="panel-heading">Results</div>
    <div class="panel-body">
          Predicted value for item:
          ${{ prediction.predicted_price_str }} per week
	  {% if price_range %}
	  <br>
	  In the past, items from '{{ request.form['brand'] }}' in the '{{ request.form['item_type'] }}' category have sold between
	  ${{ prediction.price_range[0] }} and ${{ prediction.price_range[1] }}.
	  {% endif %}
    </div>
</div>
{% endif %}

<hr class="fancy_hr">
<!-- <div id="brand_item_type_field_row" class="row"> -->
<!--   <div class="col&#45;md&#45;12"> -->
<!--     <span class="header">What's this about?</span> -->
<!--     <p class="explanation_p"> -->
<!-- 	This is an independent consulting project for <a -->
<!-- 	href="http://stylelend.com">Stylelend.com</a>. Read more about it <a href="{{ url_for('main.about') }}">here</a>. -->
<!--     </p> -->
<!--   </div> <!&#45;&#45; col&#45;md&#45;12  &#45;&#45;> -->
<!-- </div><!&#45;&#45; /.row &#45;&#45;> -->
<!-- <hr class="fancy_hr"> -->
<div class="row">
  <div class="col-md-6">
    <span class="header">About</span>
    <p class="explanation_p">
    This is an independent consulting project for <a
    href="http://stylelend.com">Stylelend.com</a>. They provide an online
    market place for women to lease out their clothing to other people. The
    problem right now is that you must send your clothes into them to have
    the worth of your clothing evaluated. Who wants to wait that long to
    find out how much your clothing items are worth?
    </p>
  </div> <!-- col-md-6  -->
  <div class="col-md-6">
    <span class="header">The Overview</span>
    <p class="explanation_p">
    This is an app that uses machine learning techniques on the database of
    inventory to make a prediction of how much you will earn just by entering
    in a few details on your clothes. 
    </p>
    
    <p class="explanation_p">
    It takes the brand, item type, retail price, and selected adjectives from
    the description and inputs these into a premade random forest regression
    model trained on historical inventory data.
    </p>
  </div> <!-- col-md-6  -->
</div><!-- /.row -->
{% endblock %}

